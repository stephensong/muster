<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Matchers · Muster</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;branch-type-matchers&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#branch-type-matchers&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Branch &amp;amp; Type Matchers&lt;/h2&gt;
"/><meta name="docsearch:version" content="6.6.2"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Matchers · Muster"/><meta property="og:type" content="website"/><meta property="og:url" content="https://dwstech.github.io/muster/index.html"/><meta property="og:description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;branch-type-matchers&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#branch-type-matchers&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Branch &amp;amp; Type Matchers&lt;/h2&gt;
"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/muster/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css"/><link rel="alternate" type="application/atom+xml" href="https://dwstech.github.io/muster/blog/atom.xml" title="Muster Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://dwstech.github.io/muster/blog/feed.xml" title="Muster Blog RSS Feed"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-129699840-1"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-129699840-1');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab"/><link rel="stylesheet" href="https://unpkg.com/tippy.js@3/dist/themes/light.css"/><script type="text/javascript" src="https://cdn.polyfill.io/v2/polyfill.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://unpkg.com/quicklink@1.0.0/dist/quicklink.umd.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js" async=""></script><script type="text/javascript" src="https://unpkg.com/tippy.js@3/dist/tippy.all.min.js" async=""></script><script type="text/javascript" src="/muster/js/code-blocks-buttons.js" async=""></script><script type="text/javascript" src="/muster/js/glossary.min.js" async=""></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><link rel="stylesheet" href="/muster/css/main.css"/><script src="/muster/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/muster/"><h2 class="headerTitle">Muster</h2></a><a href="/muster/versions"><h3>6.6.2</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/muster/docs/6.6.2/overview" target="_self">Docs</a></li><li class=""><a href="/muster/api/latest/" target="_self">API reference</a></li><li class=""><a href="/muster/playground/" target="_self">Playground</a></li><li class="siteNavGroupActive"><a href="/muster/docs/6.6.2/resources/faq" target="_self">FAQ</a></li><li class=""><a href="/muster/help" target="_self">Help</a></li><li class=""><a href="/muster/blog/" target="_self">Notes</a></li><li class=""><a href="https://github.com/dwstech/muster" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Learn</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul class=""><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/overview">Muster Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Learn</h3><ul class=""><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/learn/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/learn/graph-structure">Graph Data Structure</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/learn/nodes">Nodes</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/learn/variables">Variables</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/muster/docs/6.6.2/learn/matchers">Matchers</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/learn/async-data">Asynchronous Data</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/learn/functions">Functions</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/learn/queries">Queries</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/learn/collections">Collections</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/learn/control-flow">Control Flow</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Understanding Muster</h3><ul class=""><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/understanding-muster/data-store">How Muster Stores Data</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/understanding-muster/resolution-chains">Resolution Chains</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/understanding-muster/explicit-definition">Explicit Definitions</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/understanding-muster/lifecycle-of-a-node">Lifecycle of a Node</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/understanding-muster/scope">Scope</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/understanding-muster/crafting-muster-nodes">Crafting Muster Nodes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tutorials</h3><ul class=""><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Muster</h4><ul><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/tutorials/muster-server">Muster on the Server</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/tutorials/muster-worker">Running Muster in a Worker</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/tutorials/muster-cookbook">Muster Cookbook</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/tutorials/muster-testing">Muster Unit Testing</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Muster React</h4><ul><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/tutorials/muster-react-tutorial">Muster React Tutorial</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/tutorials/muster-react-cookbook">Muster React Cookbook</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/tutorials/muster-react-testing">Muster React Unit Testing</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Resources</h3><ul class=""><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/resources/setup">Setup</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/resources/faq">Frequently Asked Questions (FAQ)</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/resources/essential-nodes">Essential Nodes</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/resources/common-muster-errors">Common Muster Errors</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/glossary">Glossary</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.6.2/changelog">Latest Changes</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/dwstech/muster/edit/develop/packages/website/docs/learn/matchers.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Matchers</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="branch-type-matchers"></a><a href="#branch-type-matchers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Branch &amp; Type Matchers</h2>
<p>The branches of the <code>tree()</code> node can also be defined as <strong>branch matchers</strong>. These branch matchers inform the <code>tree()</code> node that a given branch can be accessed with a path that matches a specific type. Let's start with a simple matcher that accepts any name:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> muster, { match, ref, types } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dws/muster'</span>;

<span class="hljs-keyword">const</span> app = muster({
  <span class="hljs-attr">greeting</span>: {
    [match(types.string, <span class="hljs-string">'name'</span>)]: <span class="hljs-string">'Hello, world!'</span>,
  },
});

<span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> app.resolve(ref(<span class="hljs-string">'greeting'</span>, <span class="hljs-string">'Bob'</span>));
<span class="hljs-built_in">console</span>.log(result);

result = <span class="hljs-keyword">await</span> app.resolve(ref(<span class="hljs-string">'greeting'</span>, <span class="hljs-number">123</span>));
<span class="hljs-built_in">console</span>.log(result);

<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// Hello, world!</span>
<span class="hljs-comment">// Error('Invalid child key: 123')</span>
</code></pre>
<p>This example introduces two new concepts: a <code>types</code> object, and a <code>match()</code> function. The <code>types</code> object contains a number of different <strong>type matchers</strong>, that are used to inform Muster about a type of expected thing. These matchers can be used outside of Muster as well, for example:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> { types } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dws/muster'</span>;

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Is "hello" a string?'</span>, types.string(<span class="hljs-string">'hello'</span>));
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Is 123 a string?'</span>, types.string(<span class="hljs-number">123</span>));
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Is true a string?'</span>, types.string(<span class="hljs-literal">true</span>));

<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// Is "hello" a string? true</span>
<span class="hljs-comment">// Is 123 a string? false</span>
<span class="hljs-comment">// Is true a string? false</span>
</code></pre>
<p>To find out more about type matchers, browse the <a href="/muster/api/latest/">API docs</a>.</p>
<p><code>match()</code> is a function used only inside of a <code>tree()</code> node to declare a branch matcher.</p>
<ul>
<li>The first argument of the <code>match()</code> is a type matcher, that checks if a given branch name matches with the expected type.</li>
<li>The second argument of <code>match()</code> specifies a name of parameter that should be created when a given matcher captures the path. In the example above, for a path <code>ref('greeting', 'Bob')</code> the <code>name</code> parameter will contain <code>'Bob'</code>.</li>
</ul>
<p>Going back to the example, we tried resolving two different <code>ref()</code> nodes. One was for <code>'Bob'</code> string, and the other for <code>123</code> number. Looking back at the Console output you can notice that the first one logged a <code>'Hello, world!'</code> string, and the other one resulted in <code>Error</code>.</p>
<p>Let's tweak that example to utilise the value of the <code>'name'</code> parameter:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> muster, { format, match, param, ref, types } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dws/muster'</span>;

<span class="hljs-keyword">const</span> app = muster({
  <span class="hljs-attr">greeting</span>: {
    [match(types.string, <span class="hljs-string">'name'</span>)]: format(<span class="hljs-string">'Hello, ${name}!'</span>, {
      <span class="hljs-attr">name</span>: param(<span class="hljs-string">'name'</span>),
    })
  },
});

<span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> app.resolve(ref(<span class="hljs-string">'greeting'</span>, <span class="hljs-string">'Bob'</span>));
<span class="hljs-built_in">console</span>.log(result);

result = <span class="hljs-keyword">await</span> app.resolve(ref(<span class="hljs-string">'greeting'</span>, <span class="hljs-string">'Blueberry Muffin'</span>));
<span class="hljs-built_in">console</span>.log(result);

<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// Hello, Bob!</span>
<span class="hljs-comment">// Hello, Blueberry Muffin!</span>
</code></pre>
<p>Now that's better! Note the new node - <code>param()</code>. The <code>param()</code> node can be used inside a branch matched by a branch matcher. The string argument used to create the <code>param()</code> node must match the one used when creating a branch matcher. Using it outside that branch, or misspelling <code>name</code> will result in that node resolving to an error.</p>
<h4><a class="anchor" aria-hidden="true" id="why-you-might-use-this"></a><a href="#why-you-might-use-this" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why you might use this</h4>
<p>Matchers are a great way of type checking your input to restrict invalid input types being used by your branch and causing fatal errors where they may be incompatible.</p>
<h2><a class="anchor" aria-hidden="true" id="matching-shapes"></a><a href="#matching-shapes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Matching Shapes</h2>
<p>Branch matchers don't have to be only matching <code>string</code> types, they can match other types including <strong>shapes</strong> too. Consider the following example:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> muster, { computed, match, param, property, ref, types } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dws/muster'</span>;

<span class="hljs-keyword">const</span> app = muster({
  <span class="hljs-attr">greet</span>: {
    [match(types.shape({
      <span class="hljs-attr">firstName</span>: types.string,
      <span class="hljs-attr">lastName</span>: types.string,
    }), <span class="hljs-string">'user'</span>)]: format(<span class="hljs-string">'Hello, ${firstName} ${lastName}!'</span>, {
      <span class="hljs-attr">firstName</span>: property(param(<span class="hljs-string">'user'</span>), <span class="hljs-string">'firstName'</span>),
      <span class="hljs-attr">lastName</span>: property(param(<span class="hljs-string">'user'</span>), <span class="hljs-string">'lastName'</span>),
    })
  },
});

<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.resolve(
  ref(<span class="hljs-string">'greet'</span>, { <span class="hljs-attr">firstName</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">lastName</span>: <span class="hljs-string">'Smith'</span> }),
);
<span class="hljs-built_in">console</span>.log(result);

<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// Hello, Bob Smith!</span>
</code></pre>
<p>This example shows how to define branches that match on a specific shape. The shape in this case is expected to have a <code>firstName</code> and a <code>lastName</code>. Any other properties do not affect the shape matcher, and are allowed:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.resolve(
  ref(<span class="hljs-string">'greet'</span>, { <span class="hljs-attr">firstName</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">lastName</span>: <span class="hljs-string">'Smith'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> }),
);
<span class="hljs-built_in">console</span>.log(result);

<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// Hello, Bob Smith!</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="why-you-might-use-this-1"></a><a href="#why-you-might-use-this-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why you might use this</h4>
<p>This kind of functionality may be useful when matching search queries to API calls, if you know the expected shape of your results you can use matchers and the <code>fromPromise()</code> node to asynchronously anticipate them.</p>
<h2><a class="anchor" aria-hidden="true" id="nested-matchers"></a><a href="#nested-matchers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nested Matchers</h2>
<p>Just like branches, branch matchers can be nested. One thing to remember is that it's always best to uniquely name branch parameters, so that they don't shadow previously defined parameters. Let's refactor the previous example into a nested branch matcher:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> muster, { computed, match, param, ref, types } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dws/muster'</span>;

<span class="hljs-keyword">const</span> app = muster({
  <span class="hljs-attr">greet</span>: {
    [match(types.string, <span class="hljs-string">'firstName'</span>)]: {
      [match(types.string, <span class="hljs-string">'lastName'</span>)]: format(<span class="hljs-string">'Hello, ${firstName} ${lastName}'</span>, {
        <span class="hljs-attr">firstName</span>: param(<span class="hljs-string">'firstName'</span>),
        <span class="hljs-attr">lastName</span>: param(<span class="hljs-string">'lastName'</span>)
      })
    }
  },
});

<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.resolve(
  ref(<span class="hljs-string">'greet'</span>, <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'Smith'</span>),
);
<span class="hljs-built_in">console</span>.log(result);

<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// Hello, Bob Smith!</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="default-key-matchers"></a><a href="#default-key-matchers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Default Key Matchers</h2>
<p>With the help of <code>createBehaviour()</code> and <code>fromPromise()</code> we can specify default key matchers, which are used when no additional arguments are specified. Look at the following example:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> muster, { createBehaviour, fromPromise, getChildOperations, getChildProperties, match, toNode, traverse}
<span class="hljs-keyword">const</span> app = muster({
  <span class="hljs-attr">items</span>: <span class="hljs-function">(<span class="hljs-params">(</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> children = toNode({
      [match(types.string, <span class="hljs-string">'id'</span>)]: fromPromise({
        <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">{ id }</span>) =&gt;</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">`Item <span class="hljs-subst">${id}</span>`</span>),
        <span class="hljs-comment">// Handle updating item</span>
        <span class="hljs-comment">// set: () =&gt; ...</span>
      }),
    });
    <span class="hljs-keyword">return</span> createBehavior({
      <span class="hljs-attr">evaluate</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fromPromise({
        <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">'Fetching all items...'</span>),
        <span class="hljs-comment">// Handle creating item</span>
        <span class="hljs-comment">// set: ({ params }, data) =&gt; ...</span>
      }),
      <span class="hljs-attr">getChild</span>: <span class="hljs-function">(<span class="hljs-params">params, properties: GetChildProperties</span>) =&gt;</span> (
        traverse(children, getChildOperation(properties.key))
      ),
    });
  })(),
})

<span class="hljs-comment">// Request `items` with argument 'first'</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.resolve(
  ref(<span class="hljs-string">'items'</span>, <span class="hljs-string">'first'</span>)
);
<span class="hljs-built_in">console</span>.log(result);
<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// Item first</span>

<span class="hljs-comment">// Request `items` with no argument</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.resolve(
  ref(<span class="hljs-string">'items'</span>)
);
<span class="hljs-built_in">console</span>.log(result);
<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// Fetching all items...</span>
</code></pre>
<p>In this example, the branch <code>items</code> is set up to return the string <code>Item {id}</code> whenever an <code>id</code> variable is specified. Therefore calling <code>ref('items', 'abcdef')</code> would return <strong><em>&quot;Item abcdef&quot;</em></strong>. But if no <code>id</code> argument is provided, the <code>createBehaviour()</code> function is returned, resulting in <strong><em>&quot;Fetching all items...&quot;</em></strong>. This design pattern can be modified to add specific behaviours for handing a lack of arguments.</p>
<h4><a class="anchor" aria-hidden="true" id="why-you-might-use-this-2"></a><a href="#why-you-might-use-this-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why you might use this</h4>
<p>This functionality is useful as it is a way to overload your function or branch with alternative behaviours should it not always require an argument to serve a purpose if a default value is appropriate.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-1-11</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/muster/docs/6.6.2/learn/variables"><span class="arrow-prev">← </span><span>Variables</span></a><a class="docs-next button" href="/muster/docs/6.6.2/learn/async-data"><span>Asynchronous Data</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#branch-type-matchers">Branch &amp; Type Matchers</a></li><li><a href="#matching-shapes">Matching Shapes</a></li><li><a href="#nested-matchers">Nested Matchers</a></li><li><a href="#default-key-matchers">Default Key Matchers</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/muster/" class="nav-home"><img src="/muster/img/muster.svg" alt="Muster" width="66" height="58"/></a><div><h5>Docs</h5><a href="/muster/docs/overview.html">Overview</a><a href="/muster/docs/learn/introduction.html">Guides</a><a href="/muster/api/latest/">API Reference</a><a href="/muster/playground/">Playground</a><a href="/muster/docs/resources/faq.html">FAQ</a></div><div><h5>Community</h5><a href="/muster/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/muster" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="/muster/docs/changelog.html">Changelog</a><a href="/muster/blog">Notes</a><a href="https://github.com/dwstech/muster">GitHub</a><a class="github-button" href="https://github.com/dwstech/muster" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://www.github.com/dwstech/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/muster/img/dws-logo-global.svg" alt="DWS Technology Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 DWS Technology</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '4f4b66eff796f1e1d48be066f0ac4cae',
                indexName: 'muster',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:en","version:6.6.2"]}
              });
            </script></body></html>